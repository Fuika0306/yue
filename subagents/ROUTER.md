# ROUTER.md - 子代理路由表

**用途：** 告诉主代理什么时候召唤哪个子代理。当需要决定是否启动子代理时，read 这个文件。

---

## 🔍空 (Analyzer/Opus) - 何时召唤

**职能：** 创意狂想、深度分析、多角度思考

### 召唤条件（满足任一即可）
- 需要对复杂问题进行多角度分析
- 需要创意破解或非常规思路
- 需要发现隐藏的规律和联系
- 需要长期任务的战略规划
- 需要验证剀(Craftsman)的方案是否有漏洞

### 任务示例
- "分析这个谜题有哪些可能的解法"
- "这个系统设计有什么潜在问题吗"
- "帮我想想有没有更创意的方案"
- "验证一下剀的代码逻辑是否严密"

### 不应该召唤的情况
- 简单的数据处理 → 用玥
- 代码编写和调试 → 用剀
- 日常闲聊 → 主代理自己处理

### 协作关系
- **输出给剀**：创意想法和多个备选方案
- **接收来自剀**：严谨的验证和可行性反馈
- **接收来自玥**：快速的可靠性检查

---

## 🛠️剀 (Craftsman/Opus) - 何时召唤

**职能：** 死板严谨、代码编写、系统调试

### 召唤条件（满足任一即可）
- 需要编写可运行的代码或脚本
- 需要进行 API 集成或文件操作
- 需要系统调试、问题排查、性能优化
- 需要将空的创意想法转化为可执行方案
- 需要对系统进行维护和改进

### 任务示例
- "写一个脚本来自动化这个流程"
- "帮我调试这个 API 集成的问题"
- "把这个想法实现成代码"
- "优化一下这个系统的性能"

### 不应该召唤的情况
- 需要创意思路 → 用空
- 简单的快速检查 → 用玥
- 日常闲聊 → 主代理自己处理

### 协作关系
- **接收来自空**：创意想法和多个备选方案
- **输出给空**：严谨的验证和可行性反馈
- **输出给玥**：优化后的方案和关键风险点

---

## 👀玥 (Sentinel/Haiku) - 何时召唤

**职能：** 快速反应、轻量任务、实时反馈

### 召唤条件（满足任一即可）
- 需要快速检查状态或日志
- 需要简单的数据处理或格式转换
- 需要快速分类或轻量级任务
- 需要对空或剀的方案进行快速可靠性检查
- 需要即时反馈或预警触发

### 任务示例
- "快速检查一下系统状态"
- "帮我扫描一下日志有没有错误"
- "这个方案靠谱吗，快速反馈一下"
- "把这些数据转换成 JSON 格式"

### 不应该召唤的情况
- 需要深度分析 → 用空
- 需要代码编写 → 用剀
- 日常闲聊 → 主代理自己处理

### 协作关系
- **接收来自空和剀**：需要验证的方案
- **输出给两者**：快速的可靠性反馈和最终拦截

---

## 协作模式

**重要：子代理不能 spawn 子代理，所有协作必须经过主代理中转。**

### 模式 A：空 → 主代理 → 剀 → 主代理 → 玥（标准流程）
1. 主代理召唤空进行深度分析
2. 空完成分析，announce 回主代理
3. 主代理看结果，决定是否召唤剀进行实现
4. 剀完成代码/方案，announce 回主代理
5. 主代理看结果，决定是否召唤玥进行快速检查
6. 玥完成检查，announce 回主代理
7. 主代理汇总结果回复主人

### 模式 B：空 → 主代理 → 玥（快速验证）
1. 主代理召唤空提出想法
2. 空完成分析，announce 回主代理
3. 主代理看结果，召唤玥快速检查是否靠谱
4. 玥反馈结果，主代理决定是否继续

### 模式 C：剀 → 主代理 → 玥（快速反馈）
1. 主代理召唤剀完成代码/方案
2. 剀完成，announce 回主代理
3. 主代理看结果，召唤玥快速检查是否有问题
4. 玥反馈结果，主代理决定是否返工或提交

### 模式 D：单独召唤
- 简单任务可以直接召唤单个子代理，不需要协作

---

## 路由表维护

**何时更新这个文件：**
- 发现某个子代理被错误地召唤
- 发现某个任务类型没有被正确分类
- 子代理的职能发生变化

**更新规则：**
- 保持「召唤条件」清晰明确
- 保持「任务示例」与实际相符
- 定期审视「不应该召唤的情况」

---

**最后更新：** 2026-02-14 15:24 GMT+8 | 状态：第三阶段 3a 完成 ✅
